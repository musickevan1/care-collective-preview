# Prompt: Homepage Code Review Fixes

> Generated by @prompt-builder on 2025-12-20

## Original Idea
Implement fixes from code review of commit #5cb076 (homepage client updates with 3-box layout).

## Refined Understanding
The commit introduced a 3-box layout with good structure, but has several issues that need addressing:
1. **Security issue**: `innerHTML` DOM manipulation for image fallback bypasses React
2. **Wrong image path**: References non-existent `/avatars/placeholder-photo.jpg` instead of actual `/maureen-portrait.jpg`
3. **Code quality**: Repeated patterns that should be extracted for maintainability
4. **Minor cleanup**: Extra blank lines in Hero.tsx

## Target Agent
`@frontend-engineer` - Focused React/TypeScript refactoring in two files

---

## Prompt

Implement the following fixes in `app/page.tsx` and `components/Hero.tsx` based on code review findings:

### 1. Fix Image Fallback (CRITICAL - Security)

**File**: `app/page.tsx` (lines 231-251)

Replace the `innerHTML` DOM manipulation with React state-based fallback. The current implementation:
- Uses `innerHTML` which bypasses React's virtual DOM
- Can cause hydration mismatches in SSR
- Is a security anti-pattern

**Current problematic code**:
```typescript
onError={(e) => {
  e.currentTarget.style.display = 'none';
  const parent = e.currentTarget.parentElement;
  if (parent) {
    parent.innerHTML = '<svg class="w-16 h-16...';
  }
}}
```

**Required fix**:
- Add `'use client'` directive if not present (needed for useState)
- Create state: `const [imageError, setImageError] = useState(false)`
- Conditionally render either the Image or a fallback User icon from lucide-react
- Import `User` from lucide-react for the fallback icon

### 2. Fix Image Path (CRITICAL)

**File**: `app/page.tsx`

Change the image source from the non-existent placeholder to the actual photo:
```typescript
// From:
src="/avatars/placeholder-photo.jpg"

// To:
src="/maureen-portrait.jpg"
```

Also update the alt text to be more descriptive:
```typescript
alt="Dr. Maureen Templeman, CARE Collective Project Creator"
```

Remove the TODO comment since we now have the actual photo.

### 3. Extract Help Categories Data (Recommended)

**File**: `app/page.tsx`

Extract the "Kinds of Help" items to a constant for maintainability:

```typescript
const HELP_CATEGORIES = [
  { icon: Stethoscope, label: 'Health & Caregiving' },
  { icon: ShoppingCart, label: 'Groceries & Meals' },
  { icon: Car, label: 'Transportation & Errands' },
  { icon: Wrench, label: 'Household & Yard' },
  { icon: Laptop, label: 'Technology & Administrative' },
  { icon: Coffee, label: 'Social & Companionship' },
] as const;
```

Then map over this array in the JSX instead of repeating the `<li>` structure 6 times.

### 4. Extract Step Component (Recommended)

**File**: `app/page.tsx`

Extract the repeated step structure in "How It Works" box to a local component:

```typescript
interface StepProps {
  number: number;
  title: string;
  description: string;
}

function Step({ number, title, description }: StepProps): ReactElement {
  return (
    <div className="flex items-start gap-4">
      <div className="w-8 h-8 bg-sage-dark text-white rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0">
        {number}
      </div>
      <div>
        <strong className="text-foreground block mb-1">{title}</strong>
        <p className="text-muted-foreground text-sm">{description}</p>
      </div>
    </div>
  );
}
```

Define steps data and map over it.

### 5. Clean Up Hero.tsx (Minor)

**File**: `components/Hero.tsx` (lines 96-97)

Remove the extra blank lines left after the button removal.

### 6. Add ARIA Regions (Optional Enhancement)

Add `role="region"` and `aria-labelledby` to the three main boxes for improved screen reader navigation:

```typescript
<div 
  id="how-it-works" 
  className="bg-white rounded-2xl..."
  role="region"
  aria-labelledby="how-it-works-heading"
>
  <h3 id="how-it-works-heading" className="...">How It Works</h3>
```

Repeat for `why-join` and `kinds-of-help` boxes.

## Requirements

- Maintain all existing functionality and styling
- Keep TypeScript strict mode compliance (use `ReactElement` return types)
- Follow project conventions (see CLAUDE.md)
- Test that the page renders correctly after changes
- Ensure no hydration warnings in browser console

## Files to Modify

1. `app/page.tsx` - Main changes
2. `components/Hero.tsx` - Minor cleanup

## Verification

After implementation:
1. Run `npm run type-check` - should pass with 0 errors
2. Run `npm run lint` - should pass with 0 warnings
3. Load homepage in browser - verify:
   - Dr. Templeman's photo displays correctly
   - Fallback icon appears if image fails to load (test by temporarily using wrong path)
   - No console errors or hydration warnings
   - All three boxes render correctly
   - Links work as expected

---

## Context Notes

- The photo exists at `/public/maureen-portrait.jpg` (verified)
- Page may already have `'use client'` - check before adding
- The `User` icon from lucide-react is already available in the project
- Keep the circular frame styling for the photo (w-32 h-32 md:w-40 md:h-40 rounded-full)
